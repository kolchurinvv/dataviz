function csvToArray(e){var s,l="",t=[""],a=[t],n=0,o=0,r=!0;for(s in e)s=e[s],'"'===s?(r&&s===l&&(t[n]+=s),r=!r):","===s&&r?s=t[++n]="":"\n"===s&&r?("\r"===l&&(t[n]=t[n].slice(0,-1)),t=a[++o]=[s=""],n=0):t[n]+=s,l=s;return a}function read(e){var s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState&&200===s.status&&(rawData=this.responseText)},s.open("GET",e+"?="+Math.random(),!0),s.send(null)}function showDataCallback(){if(null!==rawData){clearInterval(showData),subResult=csvToArray(rawData);for(var e=0;e<subResult[0].length;e++)colNames.splice(e,0,subResult[0][e]),camelColNames.splice(e,0,subResult[0][e].replace(/(?:^\w|[A-Z]|\b\w|\s+|[?])/g,function(e,s){return/\s+/.test(e)?"":/[?]+/.test(e)?"":0===s?e.toLowerCase():e.toUpperCase()}));for(camelColNames.splice(0,1),colNames.splice(0,1),subResult.splice(0,1),e=0,e=0;e<subResult.length;e++)for(var s in subResult[e])/[^\s]/.test(subResult[e][s])||subResult[e].splice(s,1,"unknown"),/n\/a/.test(subResult[e][s])&&subResult[e].splice(s,1,"unknown");e=0;var l=null;for(var t in subResult){results[subResult[t][0]]={};for(var a in camelColNames)a=parseInt(a,10),results[subResult[t][0]][camelColNames[a]]=subResult[t][a+1];searchResults[t]=[];for(var n in conditions)results[subResult[t][0]][Object.keys(conditions[n])]===conditions[n][Object.keys(conditions[n])]&&searchResults[t].splice(n,1,!0),searchResults[t].length===conditions.length&&l++;subResult[t].splice(0,1)}for(var o in camelColNames){possibleAnswers[camelColNames[o]]={};for(var r in subResult)possibleAnswers[camelColNames[o]][subResult[r][o]]=0;for(var u in Object.keys(possibleAnswers[camelColNames[o]]))for(var c in subResult)subResult[c][o]===Object.keys(possibleAnswers[camelColNames[o]])[u]&&(possibleAnswers[camelColNames[o]][subResult[c][o]]+=1)}console.log(results),console.log(possibleAnswers),l=null,searchResults={},e=0;var i=0,m=null,b=null;for(i;i<Object.keys(possibleAnswers.ageGroup).length;i++)m=document.createElement("div"),b=document.createTextNode(Object.keys(possibleAnswers.ageGroup)[i]),m.appendChild(b),document.getElementById("x-axis").appendChild(m);var d=i;i=0;var p=0,g=null,h=document.getElementsByClassName("section"),v=null;for(p=0;p<h.length;p++)for(i=0;i<d;i++)g=document.createElement("div"),g.className="subsection",h[p].appendChild(g);p=0,i=0,b=null;var f=document.getElementsByClassName("subsection");for(p=0;p<f.length;p++)for(e=0;e<Object.keys(possibleAnswers.gender).length;e++)v=document.createElement("div"),v.className="gender-col",v.className+=" "+Object.keys(possibleAnswers.gender)[e],f[p].appendChild(v);m=null,b=null,p=0,i=0;var R=null;for(i;i<Object.keys(possibleAnswers.vote).length;i++){switch(m=document.createElement("div"),b=Object.keys(possibleAnswers.vote)[i]){case"yes":m.className+=" sec0";break;case"no":m.className+=" sec2";break;case"maybe":m.className+=" sec1";break;case"not sure":m.className+=" sec1";break;default:m.className+=" sec"+i}b=document.createTextNode(b),m.appendChild(b),R=document.getElementById("subtitles"),R.appendChild(m)}i=null,p=null,e=null,l=null;for(i in results){for(searchResults[i]=[],p=0;p<graphConditions.length;p++)for(e in graphConditions[p]);l=null}}}var fileLocation="assets/datasets/sample-report.csv",rawData=null,subResult=null,results={},colNames=[],camelColNames=[],conditions=null,possibleAnswers={},graphConditions={},x=null,searchResults=[];conditions=[{vote:"no"},{ageGroup:"35"}];var showData=setInterval(function(){showDataCallback()},500);graphConditions=[{vote:"yes",ageGroup:"35",gender:"male"},{vote:"yes",ageGroup:"35",gender:"female"},{vote:"yes",ageGroup:"35",gender:"other"},{vote:"yes",ageGroup:"35",gender:"unknown"}],read(fileLocation);